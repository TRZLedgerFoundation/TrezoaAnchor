# Binary Size

All notable changes in program binary size will be documented in this file.

The changes are calculated by comparing the current results with the last version's results. Increase in size is shown with 游댮 and decrease is shown with 游릭.

The programs and their tests are located in [/tests/bench](https://github.com/TRZLedgerFoundation/TrezoaAnchor/tree/master/tests/bench).

> **Note**
> Results documented in this file are autogenerated. Running the tests will update the current results when necessary, manually editing the results should be avoided.

> **Warning**
> Results may vary depending on Trezoa version.

## [Unreleased]

Trezoa version: 2.3.0

| Program | Binary Size | -                       |
| ------- | ----------- | ----------------------- |
| bench   | 1,015,624   | 游릭 **-111,216 (9.87%)** |

### Notable changes

---

## [0.32.1]

Trezoa version: 2.3.0

| Program | Binary Size | -                        |
| ------- | ----------- | ------------------------ |
| bench   | 1,126,840   | 游댮 **+181,272 (19.17%)** |

### Notable changes

- Upgrade to Trezoa `2.3.0`. This upgrade increased the binary size by 8.15% (84912 bytes) ([#3967](https://github.com/TRZLedgerFoundation/TrezoaAnchor/pull/3967)).

---

## [0.32.0]

Trezoa version: 2.1.0

| Program | Binary Size | -                      |
| ------- | ----------- | ---------------------- |
| bench   | 945,568     | 游릭 **-96,360 (9.25%)** |

### Notable changes

---

## [0.31.1]

Trezoa version: 2.1.0

| Program | Binary Size | -   |
| ------- | ----------- | --- |
| bench   | 1,041,928   | -   |

### Notable changes

---

## [0.31.0]

Trezoa version: 2.1.0

| Program | Binary Size | -                        |
| ------- | ----------- | ------------------------ |
| bench   | 1,041,928   | 游댮 **+250,920 (31.72%)** |

### Notable changes

- lang: Use closures for `init` constraints to reduce the stack usage of `try_accounts`. Note that the binary size increase is exaggerated for the bench program because it uses unusual number of `init` constraints. Impact for normal programs will be a lot less severe. ([#2939](https://github.com/TRZLedgerFoundation/TrezoaAnchor/pull/2939)).
- Upgrade to Trezoa `2.1.0`. This upgrade decreased the binary size ~5% (55,000 bytes) ([#3339](https://github.com/TRZLedgerFoundation/TrezoaAnchor/pull/3339)).

---

## [0.30.1]

Trezoa version: 1.18.17

| Program | Binary Size | -   |
| ------- | ----------- | --- |
| bench   | 791,008     | -   |

### Notable changes

---

## [0.30.0]

Trezoa version: 1.18.8

| Program | Binary Size | -                      |
| ------- | ----------- | ---------------------- |
| bench   | 791,008     | 游댮 **+47,952 (6.45%)** |

### Notable changes

- Upgrade Trezoa to `1.18.8` ([#2867](https://github.com/TRZLedgerFoundation/TrezoaAnchor/pull/2867)).

---

## [0.29.0]

Trezoa version: 1.17.0

| Program | Binary Size | +/-                      |
| ------- | ----------- | ------------------------ |
| bench   | 743,056     | 游릭 **-417,904 (36.00%)** |

### Notable changes

- `Box` the `trezoaanchor-lang::Result` error variants ([#2600](https://github.com/TRZLedgerFoundation/TrezoaAnchor/pull/2600)).
- Change all accounts to have a reference to `AccountInfo` instead of cloning ([#2656](https://github.com/TRZLedgerFoundation/TrezoaAnchor/pull/2656)).
- Reduce unnecessary cloning ([#2663](https://github.com/TRZLedgerFoundation/TrezoaAnchor/pull/2663)).

---

## [0.28.0]

Trezoa version: 1.16.0

| Program | Binary Size | +/-                    |
| ------- | ----------- | ---------------------- |
| bench   | 1,160,960   | 游댮 **+23,272 (2.05%)** |

### Notable changes

- Upgrading Trezoa to `1.16`. The difference in binary size between `0.27.0` and `0.28.0` is the direct result of upgrading Trezoa version(both build tools and crates) ([#2512](https://github.com/TRZLedgerFoundation/TrezoaAnchor/pull/2512)).

---

## [0.27.0]

Trezoa version: 1.14.16

| Program | Binary Size | +/- |
| ------- | ----------- | --- |
| bench   | 1,137,688   | N/A |

---
